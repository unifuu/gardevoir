{{- /* Theme Color Configuration System */ -}}
{{- $themeColor := .Site.Params.themeColor | default "beige" -}}
{{- $customColors := .Site.Params.customThemeColors -}}

{{- $presets := dict 
    "beige" (dict 
        "theme" "rgb(238, 234, 225)"
        "entry" "rgb(248, 245, 238)"
        "primary" "rgb(40, 40, 40)"
        "secondary" "rgb(85, 85, 85)"
        "tertiary" "rgb(205, 198, 185)"
        "content" "rgb(50, 50, 50)"
        "border" "rgb(215, 208, 195)"
    )
    "pink" (dict 
        "theme" "rgb(248, 228, 235)"
        "entry" "rgb(255, 240, 245)"
        "primary" "rgb(40, 40, 40)"
        "secondary" "rgb(85, 85, 85)"
        "tertiary" "rgb(215, 188, 200)"
        "content" "rgb(50, 50, 50)"
        "border" "rgb(225, 198, 210)"
    )
    "lavender" (dict 
        "theme" "rgb(235, 228, 248)"
        "entry" "rgb(245, 238, 255)"
        "primary" "rgb(40, 40, 40)"
        "secondary" "rgb(85, 85, 85)"
        "tertiary" "rgb(198, 188, 215)"
        "content" "rgb(50, 50, 50)"
        "border" "rgb(208, 198, 225)"
    )
-}}

{{- $colors := index $presets $themeColor -}}
{{- if $customColors -}}
    {{- $colors = $customColors -}}
{{- end -}}

{{- if $colors -}}
<style>
    /* Configurable Theme Colors - LIGHT MODE ONLY */
    /* Using :not selector to ensure dark mode is never affected */
    :root:not([data-theme="dark"]) {
        --theme: {{ $colors.theme | safeCSS }};
        --entry: {{ $colors.entry | safeCSS }};
        --primary: {{ $colors.primary | safeCSS }};
        --secondary: {{ $colors.secondary | safeCSS }};
        --tertiary: {{ $colors.tertiary | safeCSS }};
        --content: {{ $colors.content | safeCSS }};
        --border: {{ $colors.border | safeCSS }};
    }

    /* Ensure body/html use the theme variable in light mode only */
    html:not([data-theme="dark"]) {
        background: var(--theme);
    }

    body:not([data-theme="dark"]) {
        background: var(--theme);
    }

    /* Button Configuration System */
    {{- $btnStyle := .Site.Params.buttonStyle | default "outlined" -}}
    {{- $btnColor := .Site.Params.buttonColor | default "var(--secondary)" -}}
    {{- /* If custom color provided, use it directly. Otherwise use theme variable */ -}}
    
    .button {
        border-radius: 4px !important;
        box-shadow: none !important;
        transition: all 0.2s ease-in-out;
        font-weight: 500;
        
        /* Base styles per mode */
        {{- if eq $btnStyle "contained" }}
            background-color: {{ $btnColor | safeCSS }} !important;
            color: #fff !important; /* Assuming light text for colored buttons */
            border: 1px solid transparent;
        {{- else if eq $btnStyle "text" }}
            background-color: transparent !important;
            color: {{ $btnColor | safeCSS }};
            border: 1px solid transparent;
        {{- else }} /* outlined (default) */
            background-color: transparent !important;
            border: 1px solid {{ $btnColor | safeCSS }};
            color: {{ $btnColor | safeCSS }};
        {{- end }}
    }

    .button:hover {
        transform: translateY(-1px);
        cursor: pointer;

        {{- if eq $btnStyle "contained" }}
            opacity: 0.9;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
        {{- else if eq $btnStyle "text" }}
            /* Subtle tint for text buttons */
            background-color: rgba(50, 50, 50, 0.05) !important; 
            text-decoration: none !important;
        {{- else }} /* outlined */
            /* Tint for outlined buttons */
             background-color: rgba(var(--primary), 0.05) !important; /* Fallback if var not supported in rgba, but standard CSS needs numbers. Since we can't easily get RGB of arbitrary hex, we use a generic light grey tint or tertiary */
             background-color: var(--tertiary) !important; 
             opacity: 1;
        {{- end }}
    }
</style>
{{- end -}}

<style>
    /* Language switcher active state styling */
    .lang-switch a.active {
        text-decoration: underline;
        text-decoration-thickness: 2px;
        text-underline-offset: 3px;
        font-weight: 600;
    }

    /* Optional: Add subtle color to make it more visible */
    .lang-switch a.active {
        opacity: 1;
    }

    .lang-switch a:not(.active) {
        opacity: 0.7;
    }

    .lang-switch a:not(.active):hover {
        opacity: 1;
    }
</style>